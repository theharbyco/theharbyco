<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Harby Co â€“ Online Book Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- FIREBASE COMPAT SDK (ONLY THIS) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
header{background:#000;color:#fff;padding:10px}
nav button{color:#fff;margin-right:10px;background:none;border:none}
#books{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;padding:12px}
.card{background:#fff;padding:10px;border-radius:6px;text-align:center}
.card img{width:100%;height:200px;object-fit:cover}
.price del{color:#888}
.cart{position:fixed;right:0;top:0;width:300px;height:100%;background:#fff;padding:10px;display:none}
.authBox{background:#fff;margin:10px;padding:10px;border-radius:6px}
footer{text-align:center;padding:20px;font-size:13px}
</style>
</head>

<body>

<header>
<h2>The Harby Co</h2>
<nav>
<button onclick="openCart()">Cart (<span id="cartCount">0</span>)</button>
<span id="userName"></span>
<button id="googleBtn" onclick="openLogin()">Login</button>
  <button id="logoutBtn" onclick="logout()" style="display:none">Logout</button>
</nav>
</header>
<!-- LOGIN MODAL -->
<div id="loginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:999;">
  <div style="background:#fff;width:320px;margin:80px auto;padding:15px;border-radius:8px;position:relative">
    
    <h3>Login / Signup</h3>
    <button onclick="closeLogin()" style="position:absolute;top:8px;right:10px">âœ–</button>

    <!-- GOOGLE -->
    <button style="width:100%" onclick="googleLogin()">Continue with Google</button>
    <hr>

    <!-- EMAIL -->
    <input id="email" placeholder="Email" style="width:100%;margin-top:8px"><br><br>
    <input id="password" type="password" placeholder="Password" style="width:100%"><br><br>
    <button style="width:49%" onclick="emailLogin()">Login</button>
    <button style="width:49%" onclick="emailSignup()">Signup</button>

    <hr>

    <!-- PHONE -->
    <input id="phone" placeholder="+91XXXXXXXXXX" style="width:100%"><br><br>
    <div id="recaptcha"></div><br>
    <button style="width:100%" onclick="sendOTP()">Send OTP</button><br><br>
    <input id="otp" placeholder="Enter OTP" style="width:100%"><br><br>
    <button style="width:100%" onclick="verifyOTP()">Verify OTP</button>

  </div>
</div>
<!-- EMAIL LOGIN -->
<div class="authBox">
<h3>Email Login</h3>
<input id="email" placeholder="Email"><br><br>
<input id="password" type="password" placeholder="Password"><br><br>
<button onclick="emailSignup()">Create Account</button>
<button onclick="emailLogin()">Login</button>
</div>

<!-- PHONE LOGIN -->
<div class="authBox">
<h3>Mobile OTP Login</h3>
<input id="phone" placeholder="+91XXXXXXXXXX"><br><br>
<div id="recaptcha"></div><br>
<button onclick="sendOTP()">Send OTP</button><br><br>
<input id="otp" placeholder="Enter OTP">
<button onclick="verifyOTP()">Verify OTP</button>
</div>

<h3 style="padding-left:12px">Books</h3>
<div id="books"></div>

<!-- CART -->
<div class="cart" id="cartBox">
<h3>Your Cart</h3>
<div id="cartItems"></div>
<button onclick="checkoutWhatsApp()">Checkout WhatsApp</button>
<button onclick="closeCart()">Close</button>
</div>

<footer>
<a href="about.html">About</a> | <a href="contact.html">Contact</a><br><br>
Â© 2026 The Harby Co
</footer>

<script>
/* ---------- FIREBASE INIT ---------- */
firebase.initializeApp({
  apiKey: "AIzaSyAe_SMY2YU2xXFP79zGMnbw_zKnzLmvhno",
  authDomain: "theharbyco.firebaseapp.com",
});
const auth = firebase.auth();

/* ---------- BOOK DATA ---------- */
const books=[
{name:"Atomic Habits",mrp:699,price:399,img:"atomic-habits.jpg"},
{name:"Rich Dad Poor Dad",mrp:599,price:349,img:"rich-dad-poor-dad.jpg"},
{name:"Gunahon Ka Devta",mrp:299,price:249,img:"gunahon-ka-devta.jpg"},
{name:"Raag Darbari",mrp:399,price:349,img:"raag-darbari.jpg"},
{name:"Wings of Fire",mrp:499,price:449,img:"wings-of-fire.jpg"},
{name:"The Alchemist",mrp:399,price:349,img:"the-alchemist.jpg"},
{name:"You Can Win",mrp:350,price:300,img:"you-can-win.jpg"},
{name:"SSC General Knowledge",mrp:450,price:400,img:"ssc-gk.jpg"}
];

const box=document.getElementById("books");
books.forEach((b,i)=>{
 box.innerHTML+=`
 <div class="card">
  <img src="images/${b.img}">
  <h4>${b.name}</h4>
  <div class="price"><del>â‚¹${b.mrp}</del> <b>â‚¹${b.price}</b></div>
  <button onclick="addToCart(${i})">Add to Cart</button>
 </div>`;
});
<script>
function openLogin(){
  document.getElementById("loginModal").style.display="block";
}
function closeLogin(){
  document.getElementById("loginModal").style.display="none";
}
</script>
/* ---------- CART ---------- */
let cart=[];
function addToCart(i){
 cart.push(books[i]);
 document.getElementById("cartCount").innerText=cart.length;
}
function openCart(){
 cartBox.style.display="block";
 cartItems.innerHTML=cart.map(i=>i.name+" â‚¹"+i.price).join("<br>");
}
function closeCart(){cartBox.style.display="none";}

/* ---------- WHATSAPP ---------- */
function checkoutWhatsApp(){
 let msg="ðŸ“š *The Harby Co Invoice*\n\n";
 let total=0;
 cart.forEach(i=>{msg+=`â€¢ ${i.name} â‚¹${i.price}\n`;total+=i.price});
 msg+=`\nðŸ’° Total â‚¹${total}`;
 window.open("https://wa.me/918858504768?text="+encodeURIComponent(msg));
}

/* ---------- GOOGLE LOGIN ---------- */
function googleLogin(){
 auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
}

/* ---------- EMAIL LOGIN ---------- */
function emailSignup(){
 auth.createUserWithEmailAndPassword(email.value,password.value)
 .then(()=>alert("Account created"));
}
function emailLogin(){
 auth.signInWithEmailAndPassword(email.value,password.value)
 .then(()=>alert("Logged in"));
}

/* ---------- PHONE LOGIN ---------- */
let confirmation;
window.onload=()=>window.recaptcha=new firebase.auth.RecaptchaVerifier("recaptcha");
function sendOTP(){
 auth.signInWithPhoneNumber(phone.value,recaptcha)
 .then(r=>confirmation=r);
}
function verifyOTP(){confirmation.confirm(otp.value);}

/* ---------- AUTH STATE ---------- */
auth.onAuthStateChanged(user=>{
 if(user){
   document.getElementById("userName").innerText =
     "Hello " + (user.displayName || user.phoneNumber || user.email);

   document.getElementById("googleBtn").style.display="none";
   document.getElementById("logoutBtn").style.display="inline";

   closeLogin(); // ðŸ”¥ modal auto close
 }
});
</script>

</body>
</html>
